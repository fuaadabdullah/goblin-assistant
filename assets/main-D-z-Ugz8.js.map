{"version":3,"file":"main-D-z-Ugz8.js","sources":["../../node_modules/@datadog/browser-logs/esm/domain/logger/isAuthorized.js","../../node_modules/@datadog/browser-logs/esm/domain/createErrorFieldFromRawError.js","../../node_modules/@datadog/browser-logs/esm/domain/logger.js","../../node_modules/@datadog/browser-logs/esm/domain/contexts/commonContext.js","../../node_modules/@datadog/browser-logs/esm/domain/configuration.js","../../node_modules/@datadog/browser-logs/esm/boot/preStartLogs.js","../../node_modules/@datadog/browser-logs/esm/boot/logsPublicApi.js","../../node_modules/@datadog/browser-logs/esm/domain/logsSessionManager.js","../../node_modules/@datadog/browser-logs/esm/domain/assembly.js","../../node_modules/@datadog/browser-logs/esm/domain/console/consoleCollection.js","../../node_modules/@datadog/browser-logs/esm/domain/report/reportCollection.js","../../node_modules/@datadog/browser-logs/esm/domain/networkError/networkErrorCollection.js","../../node_modules/@datadog/browser-logs/esm/domain/runtimeError/runtimeErrorCollection.js","../../node_modules/@datadog/browser-logs/esm/domain/lifeCycle.js","../../node_modules/@datadog/browser-logs/esm/domain/logger/loggerCollection.js","../../node_modules/@datadog/browser-logs/esm/transport/startLogsBatch.js","../../node_modules/@datadog/browser-logs/esm/transport/startLogsBridge.js","../../node_modules/@datadog/browser-logs/esm/domain/contexts/internalContext.js","../../node_modules/@datadog/browser-logs/esm/domain/reportError.js","../../node_modules/@datadog/browser-logs/esm/domain/hooks.js","../../node_modules/@datadog/browser-logs/esm/domain/contexts/rumInternalContext.js","../../node_modules/@datadog/browser-logs/esm/domain/contexts/sessionContext.js","../../node_modules/@datadog/browser-logs/esm/domain/contexts/trackingConsentContext.js","../../node_modules/@datadog/browser-logs/esm/boot/startLogs.js","../../node_modules/@datadog/browser-logs/esm/entries/main.js"],"sourcesContent":["export function isAuthorized(status, handlerType, logger) {\n    const loggerHandler = logger.getHandler();\n    const sanitizedHandlerType = Array.isArray(loggerHandler) ? loggerHandler : [loggerHandler];\n    return STATUS_PRIORITIES[status] >= STATUS_PRIORITIES[logger.getLevel()] && sanitizedHandlerType.includes(handlerType);\n}\nexport const StatusType = {\n    ok: 'ok',\n    debug: 'debug',\n    info: 'info',\n    notice: 'notice',\n    warn: 'warn',\n    error: 'error',\n    critical: 'critical',\n    alert: 'alert',\n    emerg: 'emerg',\n};\nexport const STATUS_PRIORITIES = {\n    [StatusType.ok]: 0,\n    [StatusType.debug]: 1,\n    [StatusType.info]: 2,\n    [StatusType.notice]: 4,\n    [StatusType.warn]: 5,\n    [StatusType.error]: 6,\n    [StatusType.critical]: 7,\n    [StatusType.alert]: 8,\n    [StatusType.emerg]: 9,\n};\n//# sourceMappingURL=isAuthorized.js.map","export function createErrorFieldFromRawError(rawError, { \n/**\n * Set this to `true` to include the error message in the error field. In most cases, the error\n * message is already included in the log message, so we don't need to include it again.\n */\nincludeMessage = false, } = {}) {\n    return {\n        stack: rawError.stack,\n        kind: rawError.type,\n        message: includeMessage ? rawError.message : undefined,\n        causes: rawError.causes,\n        fingerprint: rawError.fingerprint,\n        handling: rawError.handling,\n    };\n}\n//# sourceMappingURL=createErrorFieldFromRawError.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { clocksNow, computeRawError, combine, createContextManager, ErrorSource, monitored, sanitize, createHandlingStack, buildTag, sanitizeTag, } from '@datadog/browser-core';\nimport { isAuthorized, StatusType } from './logger/isAuthorized';\nimport { createErrorFieldFromRawError } from './createErrorFieldFromRawError';\nexport const HandlerType = {\n    console: 'console',\n    http: 'http',\n    silent: 'silent',\n};\nexport const STATUSES = Object.keys(StatusType);\n// note: it is safe to merge declarations as long as the methods are actually defined on the prototype\n// eslint-disable-next-line @typescript-eslint/no-unsafe-declaration-merging, no-restricted-syntax\nexport class Logger {\n    constructor(handleLogStrategy, name, handlerType = HandlerType.http, level = StatusType.debug, loggerContext = {}) {\n        this.handleLogStrategy = handleLogStrategy;\n        this.handlerType = handlerType;\n        this.level = level;\n        this.contextManager = createContextManager('logger');\n        this.tags = [];\n        this.contextManager.setContext(loggerContext);\n        if (name) {\n            this.contextManager.setContextProperty('logger', { name });\n        }\n    }\n    logImplementation(message, messageContext, status = StatusType.info, error, handlingStack) {\n        const sanitizedMessageContext = sanitize(messageContext);\n        let context;\n        if (error !== undefined && error !== null) {\n            const rawError = computeRawError({\n                originalError: error,\n                nonErrorPrefix: \"Provided\" /* NonErrorPrefix.PROVIDED */,\n                source: ErrorSource.LOGGER,\n                handling: \"handled\" /* ErrorHandling.HANDLED */,\n                startClocks: clocksNow(),\n            });\n            context = combine({\n                error: createErrorFieldFromRawError(rawError, { includeMessage: true }),\n            }, rawError.context, sanitizedMessageContext);\n        }\n        else {\n            context = sanitizedMessageContext;\n        }\n        this.handleLogStrategy({\n            message: sanitize(message),\n            context,\n            status,\n        }, this, handlingStack);\n    }\n    log(message, messageContext, status = StatusType.info, error) {\n        let handlingStack;\n        if (isAuthorized(status, HandlerType.http, this)) {\n            handlingStack = createHandlingStack('log');\n        }\n        this.logImplementation(message, messageContext, status, error, handlingStack);\n    }\n    setContext(context) {\n        this.contextManager.setContext(context);\n    }\n    getContext() {\n        return this.contextManager.getContext();\n    }\n    setContextProperty(key, value) {\n        this.contextManager.setContextProperty(key, value);\n    }\n    removeContextProperty(key) {\n        this.contextManager.removeContextProperty(key);\n    }\n    clearContext() {\n        this.contextManager.clearContext();\n    }\n    addTag(key, value) {\n        this.tags.push(buildTag(key, value));\n    }\n    removeTagsWithKey(key) {\n        const sanitizedKey = sanitizeTag(key);\n        this.tags = this.tags.filter((tag) => tag !== sanitizedKey && !tag.startsWith(`${sanitizedKey}:`));\n    }\n    getTags() {\n        return this.tags.slice();\n    }\n    setHandler(handler) {\n        this.handlerType = handler;\n    }\n    getHandler() {\n        return this.handlerType;\n    }\n    setLevel(level) {\n        this.level = level;\n    }\n    getLevel() {\n        return this.level;\n    }\n}\n__decorate([\n    monitored\n], Logger.prototype, \"logImplementation\", null);\n/* eslint-disable local-rules/disallow-side-effects */\nLogger.prototype.ok = createLoggerMethod(StatusType.ok);\nLogger.prototype.debug = createLoggerMethod(StatusType.debug);\nLogger.prototype.info = createLoggerMethod(StatusType.info);\nLogger.prototype.notice = createLoggerMethod(StatusType.notice);\nLogger.prototype.warn = createLoggerMethod(StatusType.warn);\nLogger.prototype.error = createLoggerMethod(StatusType.error);\nLogger.prototype.critical = createLoggerMethod(StatusType.critical);\nLogger.prototype.alert = createLoggerMethod(StatusType.alert);\nLogger.prototype.emerg = createLoggerMethod(StatusType.emerg);\nfunction createLoggerMethod(status) {\n    return function (message, messageContext, error) {\n        let handlingStack;\n        if (isAuthorized(status, HandlerType.http, this)) {\n            handlingStack = createHandlingStack('log');\n        }\n        this.logImplementation(message, messageContext, status, error, handlingStack);\n    };\n}\n//# sourceMappingURL=logger.js.map","import { isWorkerEnvironment } from '@datadog/browser-core';\nexport function buildCommonContext() {\n    if (isWorkerEnvironment) {\n        return {};\n    }\n    return {\n        view: {\n            referrer: document.referrer,\n            url: window.location.href,\n        },\n    };\n}\n//# sourceMappingURL=commonContext.js.map","import { serializeConfiguration, ONE_KIBI_BYTE, validateAndBuildConfiguration, display, removeDuplicates, ConsoleApiName, RawReportType, objectValues, } from '@datadog/browser-core';\n/**\n * arbitrary value, byte precision not needed\n */\nexport const DEFAULT_REQUEST_ERROR_RESPONSE_LENGTH_LIMIT = 32 * ONE_KIBI_BYTE;\nexport function validateAndBuildLogsConfiguration(initConfiguration, errorStack) {\n    if (initConfiguration.usePciIntake === true && initConfiguration.site && initConfiguration.site !== 'datadoghq.com') {\n        display.warn('PCI compliance for Logs is only available for Datadog organizations in the US1 site. Default intake will be used.');\n    }\n    const baseConfiguration = validateAndBuildConfiguration(initConfiguration, errorStack);\n    const forwardConsoleLogs = validateAndBuildForwardOption(initConfiguration.forwardConsoleLogs, objectValues(ConsoleApiName), 'Forward Console Logs');\n    const forwardReports = validateAndBuildForwardOption(initConfiguration.forwardReports, objectValues(RawReportType), 'Forward Reports');\n    if (!baseConfiguration || !forwardConsoleLogs || !forwardReports) {\n        return;\n    }\n    if (initConfiguration.forwardErrorsToLogs && !forwardConsoleLogs.includes(ConsoleApiName.error)) {\n        forwardConsoleLogs.push(ConsoleApiName.error);\n    }\n    return {\n        forwardErrorsToLogs: initConfiguration.forwardErrorsToLogs !== false,\n        forwardConsoleLogs,\n        forwardReports,\n        requestErrorResponseLengthLimit: DEFAULT_REQUEST_ERROR_RESPONSE_LENGTH_LIMIT,\n        ...baseConfiguration,\n    };\n}\nexport function validateAndBuildForwardOption(option, allowedValues, label) {\n    if (option === undefined) {\n        return [];\n    }\n    if (!(option === 'all' || (Array.isArray(option) && option.every((api) => allowedValues.includes(api))))) {\n        display.error(`${label} should be \"all\" or an array with allowed values \"${allowedValues.join('\", \"')}\"`);\n        return;\n    }\n    return option === 'all' ? allowedValues : removeDuplicates(option);\n}\nexport function serializeLogsConfiguration(configuration) {\n    const baseSerializedInitConfiguration = serializeConfiguration(configuration);\n    return {\n        forward_errors_to_logs: configuration.forwardErrorsToLogs,\n        forward_console_logs: configuration.forwardConsoleLogs,\n        forward_reports: configuration.forwardReports,\n        use_pci_intake: configuration.usePciIntake,\n        ...baseSerializedInitConfiguration,\n    };\n}\n//# sourceMappingURL=configuration.js.map","import { createBoundedBuffer, canUseEventBridge, display, displayAlreadyInitializedError, initFeatureFlags, initFetchObservable, noop, timeStampNow, buildAccountContextManager, CustomerContextKey, bufferContextCalls, addTelemetryConfiguration, buildGlobalContextManager, buildUserContextManager, } from '@datadog/browser-core';\nimport { serializeLogsConfiguration, validateAndBuildLogsConfiguration } from '../domain/configuration';\nexport function createPreStartStrategy(getCommonContext, trackingConsentState, doStartLogs) {\n    const bufferApiCalls = createBoundedBuffer();\n    // TODO next major: remove the globalContext, accountContextManager, userContext from preStartStrategy and use an empty context instead\n    const globalContext = buildGlobalContextManager();\n    bufferContextCalls(globalContext, CustomerContextKey.globalContext, bufferApiCalls);\n    const accountContext = buildAccountContextManager();\n    bufferContextCalls(accountContext, CustomerContextKey.accountContext, bufferApiCalls);\n    const userContext = buildUserContextManager();\n    bufferContextCalls(userContext, CustomerContextKey.userContext, bufferApiCalls);\n    let cachedInitConfiguration;\n    let cachedConfiguration;\n    const trackingConsentStateSubscription = trackingConsentState.observable.subscribe(tryStartLogs);\n    function tryStartLogs() {\n        if (!cachedConfiguration || !cachedInitConfiguration || !trackingConsentState.isGranted()) {\n            return;\n        }\n        trackingConsentStateSubscription.unsubscribe();\n        const startLogsResult = doStartLogs(cachedInitConfiguration, cachedConfiguration);\n        bufferApiCalls.drain(startLogsResult);\n    }\n    return {\n        init(initConfiguration, errorStack) {\n            if (!initConfiguration) {\n                display.error('Missing configuration');\n                return;\n            }\n            // Set the experimental feature flags as early as possible, so we can use them in most places\n            initFeatureFlags(initConfiguration.enableExperimentalFeatures);\n            if (canUseEventBridge()) {\n                initConfiguration = overrideInitConfigurationForBridge(initConfiguration);\n            }\n            // Expose the initial configuration regardless of initialization success.\n            cachedInitConfiguration = initConfiguration;\n            addTelemetryConfiguration(serializeLogsConfiguration(initConfiguration));\n            if (cachedConfiguration) {\n                displayAlreadyInitializedError('DD_LOGS', initConfiguration);\n                return;\n            }\n            const configuration = validateAndBuildLogsConfiguration(initConfiguration, errorStack);\n            if (!configuration) {\n                return;\n            }\n            cachedConfiguration = configuration;\n            // Instrumuent fetch to track network requests\n            // This is needed in case the consent is not granted and some cutsomer\n            // library (Apollo Client) is storing uninstrumented fetch to be used later\n            // The subscrption is needed so that the instrumentation process is completed\n            initFetchObservable().subscribe(noop);\n            trackingConsentState.tryToInit(configuration.trackingConsent);\n            tryStartLogs();\n        },\n        get initConfiguration() {\n            return cachedInitConfiguration;\n        },\n        globalContext,\n        accountContext,\n        userContext,\n        getInternalContext: noop,\n        handleLog(message, statusType, handlingStack, context = getCommonContext(), date = timeStampNow()) {\n            bufferApiCalls.add((startLogsResult) => startLogsResult.handleLog(message, statusType, handlingStack, context, date));\n        },\n    };\n}\nfunction overrideInitConfigurationForBridge(initConfiguration) {\n    return { ...initConfiguration, clientToken: 'empty' };\n}\n//# sourceMappingURL=preStartLogs.js.map","import { ContextManagerMethod, CustomerContextKey, addTelemetryUsage, makePublicApi, monitor, sanitize, displayAlreadyInitializedError, deepClone, createTrackingConsentState, defineContextMethod, startBufferingData, callMonitored, } from '@datadog/browser-core';\nimport { Logger } from '../domain/logger';\nimport { buildCommonContext } from '../domain/contexts/commonContext';\nimport { createPreStartStrategy } from './preStartLogs';\nexport function makeLogsPublicApi(startLogsImpl) {\n    const trackingConsentState = createTrackingConsentState();\n    const bufferedDataObservable = startBufferingData().observable;\n    let strategy = createPreStartStrategy(buildCommonContext, trackingConsentState, (initConfiguration, configuration) => {\n        const startLogsResult = startLogsImpl(configuration, buildCommonContext, trackingConsentState, bufferedDataObservable);\n        strategy = createPostStartStrategy(initConfiguration, startLogsResult);\n        return startLogsResult;\n    });\n    const getStrategy = () => strategy;\n    const customLoggers = {};\n    const mainLogger = new Logger((...params) => strategy.handleLog(...params));\n    return makePublicApi({\n        logger: mainLogger,\n        init: (initConfiguration) => {\n            const errorStack = new Error().stack;\n            callMonitored(() => strategy.init(initConfiguration, errorStack));\n        },\n        setTrackingConsent: monitor((trackingConsent) => {\n            trackingConsentState.update(trackingConsent);\n            addTelemetryUsage({ feature: 'set-tracking-consent', tracking_consent: trackingConsent });\n        }),\n        getGlobalContext: defineContextMethod(getStrategy, CustomerContextKey.globalContext, ContextManagerMethod.getContext),\n        setGlobalContext: defineContextMethod(getStrategy, CustomerContextKey.globalContext, ContextManagerMethod.setContext),\n        setGlobalContextProperty: defineContextMethod(getStrategy, CustomerContextKey.globalContext, ContextManagerMethod.setContextProperty),\n        removeGlobalContextProperty: defineContextMethod(getStrategy, CustomerContextKey.globalContext, ContextManagerMethod.removeContextProperty),\n        clearGlobalContext: defineContextMethod(getStrategy, CustomerContextKey.globalContext, ContextManagerMethod.clearContext),\n        createLogger: monitor((name, conf = {}) => {\n            customLoggers[name] = new Logger((...params) => strategy.handleLog(...params), sanitize(name), conf.handler, conf.level, sanitize(conf.context));\n            return customLoggers[name];\n        }),\n        getLogger: monitor((name) => customLoggers[name]),\n        getInitConfiguration: monitor(() => deepClone(strategy.initConfiguration)),\n        getInternalContext: monitor((startTime) => strategy.getInternalContext(startTime)),\n        setUser: defineContextMethod(getStrategy, CustomerContextKey.userContext, ContextManagerMethod.setContext),\n        getUser: defineContextMethod(getStrategy, CustomerContextKey.userContext, ContextManagerMethod.getContext),\n        setUserProperty: defineContextMethod(getStrategy, CustomerContextKey.userContext, ContextManagerMethod.setContextProperty),\n        removeUserProperty: defineContextMethod(getStrategy, CustomerContextKey.userContext, ContextManagerMethod.removeContextProperty),\n        clearUser: defineContextMethod(getStrategy, CustomerContextKey.userContext, ContextManagerMethod.clearContext),\n        setAccount: defineContextMethod(getStrategy, CustomerContextKey.accountContext, ContextManagerMethod.setContext),\n        getAccount: defineContextMethod(getStrategy, CustomerContextKey.accountContext, ContextManagerMethod.getContext),\n        setAccountProperty: defineContextMethod(getStrategy, CustomerContextKey.accountContext, ContextManagerMethod.setContextProperty),\n        removeAccountProperty: defineContextMethod(getStrategy, CustomerContextKey.accountContext, ContextManagerMethod.removeContextProperty),\n        clearAccount: defineContextMethod(getStrategy, CustomerContextKey.accountContext, ContextManagerMethod.clearContext),\n    });\n}\nfunction createPostStartStrategy(initConfiguration, startLogsResult) {\n    return {\n        init: (initConfiguration) => {\n            displayAlreadyInitializedError('DD_LOGS', initConfiguration);\n        },\n        initConfiguration,\n        ...startLogsResult,\n    };\n}\n//# sourceMappingURL=logsPublicApi.js.map","import { Observable, performDraw, SESSION_NOT_TRACKED, startSessionManager } from '@datadog/browser-core';\nexport const LOGS_SESSION_KEY = 'logs';\nexport function startLogsSessionManager(configuration, trackingConsentState) {\n    const sessionManager = startSessionManager(configuration, LOGS_SESSION_KEY, (rawTrackingType) => computeTrackingType(configuration, rawTrackingType), trackingConsentState);\n    return {\n        findTrackedSession: (startTime, options = { returnInactive: false }) => {\n            const session = sessionManager.findSession(startTime, options);\n            return session && session.trackingType === \"1\" /* LoggerTrackingType.TRACKED */\n                ? {\n                    id: session.id,\n                    anonymousId: session.anonymousId,\n                }\n                : undefined;\n        },\n        expireObservable: sessionManager.expireObservable,\n    };\n}\nexport function startLogsSessionManagerStub(configuration) {\n    const isTracked = computeTrackingType(configuration) === \"1\" /* LoggerTrackingType.TRACKED */;\n    const session = isTracked ? {} : undefined;\n    return {\n        findTrackedSession: () => session,\n        expireObservable: new Observable(),\n    };\n}\nfunction computeTrackingType(configuration, rawTrackingType) {\n    if (hasValidLoggerSession(rawTrackingType)) {\n        return rawTrackingType;\n    }\n    if (!performDraw(configuration.sessionSampleRate)) {\n        return \"0\" /* LoggerTrackingType.NOT_TRACKED */;\n    }\n    return \"1\" /* LoggerTrackingType.TRACKED */;\n}\nfunction hasValidLoggerSession(trackingType) {\n    return trackingType === \"0\" /* LoggerTrackingType.NOT_TRACKED */ || trackingType === \"1\" /* LoggerTrackingType.TRACKED */;\n}\n//# sourceMappingURL=logsSessionManager.js.map","import { DISCARDED, ErrorSource, buildTags, combine, createEventRateLimiter, getRelativeTime, } from '@datadog/browser-core';\nimport { STATUSES } from './logger';\nexport function startLogsAssembly(configuration, lifeCycle, hooks, getCommonContext, reportError, eventRateLimit) {\n    const statusWithCustom = STATUSES.concat(['custom']);\n    const logRateLimiters = {};\n    statusWithCustom.forEach((status) => {\n        logRateLimiters[status] = createEventRateLimiter(status, reportError, eventRateLimit);\n    });\n    lifeCycle.subscribe(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, ({ rawLogsEvent, messageContext = undefined, savedCommonContext = undefined, domainContext, ddtags = [] }) => {\n        var _a, _b;\n        const startTime = getRelativeTime(rawLogsEvent.date);\n        const commonContext = savedCommonContext || getCommonContext();\n        const defaultLogsEventAttributes = hooks.triggerHook(0 /* HookNames.Assemble */, {\n            startTime,\n        });\n        if (defaultLogsEventAttributes === DISCARDED) {\n            return;\n        }\n        const defaultDdtags = buildTags(configuration);\n        const log = combine({\n            view: commonContext.view,\n        }, defaultLogsEventAttributes, rawLogsEvent, messageContext, {\n            ddtags: defaultDdtags.concat(ddtags).join(','),\n        });\n        if (((_a = configuration.beforeSend) === null || _a === void 0 ? void 0 : _a.call(configuration, log, domainContext)) === false ||\n            (log.origin !== ErrorSource.AGENT &&\n                ((_b = logRateLimiters[log.status]) !== null && _b !== void 0 ? _b : logRateLimiters['custom']).isLimitReached())) {\n            return;\n        }\n        lifeCycle.notify(1 /* LifeCycleEventType.LOG_COLLECTED */, log);\n    });\n}\n//# sourceMappingURL=assembly.js.map","import { timeStampNow, ConsoleApiName, ErrorSource, initConsoleObservable } from '@datadog/browser-core';\nimport { StatusType } from '../logger/isAuthorized';\nimport { createErrorFieldFromRawError } from '../createErrorFieldFromRawError';\nexport const LogStatusForApi = {\n    [ConsoleApiName.log]: StatusType.info,\n    [ConsoleApiName.debug]: StatusType.debug,\n    [ConsoleApiName.info]: StatusType.info,\n    [ConsoleApiName.warn]: StatusType.warn,\n    [ConsoleApiName.error]: StatusType.error,\n};\nexport function startConsoleCollection(configuration, lifeCycle) {\n    const consoleSubscription = initConsoleObservable(configuration.forwardConsoleLogs).subscribe((log) => {\n        var _a;\n        const collectedData = {\n            rawLogsEvent: {\n                date: timeStampNow(),\n                message: log.message,\n                origin: ErrorSource.CONSOLE,\n                error: log.error && createErrorFieldFromRawError(log.error),\n                status: LogStatusForApi[log.api],\n            },\n            messageContext: (_a = log.error) === null || _a === void 0 ? void 0 : _a.context,\n            domainContext: {\n                handlingStack: log.handlingStack,\n            },\n        };\n        lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, collectedData);\n    });\n    return {\n        stop: () => {\n            consoleSubscription.unsubscribe();\n        },\n    };\n}\n//# sourceMappingURL=consoleCollection.js.map","import { timeStampNow, ErrorSource, getFileFromStackTraceString, initReportObservable } from '@datadog/browser-core';\nimport { StatusType } from '../logger/isAuthorized';\nimport { createErrorFieldFromRawError } from '../createErrorFieldFromRawError';\nexport function startReportCollection(configuration, lifeCycle) {\n    const reportSubscription = initReportObservable(configuration, configuration.forwardReports).subscribe((rawError) => {\n        let message = rawError.message;\n        let error;\n        const status = rawError.originalError.type === 'deprecation' ? StatusType.warn : StatusType.error;\n        if (status === StatusType.error) {\n            error = createErrorFieldFromRawError(rawError);\n        }\n        else if (rawError.stack) {\n            message += ` Found in ${getFileFromStackTraceString(rawError.stack)}`;\n        }\n        lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, {\n            rawLogsEvent: {\n                date: timeStampNow(),\n                message,\n                origin: ErrorSource.REPORT,\n                error,\n                status,\n            },\n        });\n    });\n    return {\n        stop: () => {\n            reportSubscription.unsubscribe();\n        },\n    };\n}\n//# sourceMappingURL=reportCollection.js.map","import { isWorkerEnvironment, Observable, ErrorSource, initXhrObservable, RequestType, initFetchObservable, computeStackTrace, toStackTraceString, noop, isServerError, isIntakeUrl, safeTruncate, } from '@datadog/browser-core';\nimport { StatusType } from '../logger/isAuthorized';\nexport function startNetworkErrorCollection(configuration, lifeCycle) {\n    if (!configuration.forwardErrorsToLogs) {\n        return { stop: noop };\n    }\n    // XHR is not available in web workers, so we use an empty observable that never emits\n    const xhrSubscription = (isWorkerEnvironment ? new Observable() : initXhrObservable(configuration)).subscribe((context) => {\n        if (context.state === 'complete') {\n            handleResponse(RequestType.XHR, context);\n        }\n    });\n    const fetchSubscription = initFetchObservable({\n        responseBodyAction: (context) => (isNetworkError(context) ? 2 /* ResponseBodyAction.COLLECT */ : 0 /* ResponseBodyAction.IGNORE */),\n    }).subscribe((context) => {\n        if (context.state === 'resolve') {\n            handleResponse(RequestType.FETCH, context);\n        }\n    });\n    function isNetworkError(request) {\n        return !isIntakeUrl(request.url) && (isRejected(request) || isServerError(request.status));\n    }\n    function handleResponse(type, request) {\n        if (!isNetworkError(request)) {\n            return;\n        }\n        const stack = 'error' in request && request.error\n            ? toStackTraceString(computeStackTrace(request.error))\n            : request.responseBody || 'Failed to load';\n        const domainContext = {\n            isAborted: request.isAborted,\n            handlingStack: request.handlingStack,\n        };\n        lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, {\n            rawLogsEvent: {\n                message: `${format(type)} error ${request.method} ${request.url}`,\n                date: request.startClocks.timeStamp,\n                error: {\n                    stack: safeTruncate(stack, configuration.requestErrorResponseLengthLimit, '...'),\n                    // We don't know if the error was handled or not, so we set it to undefined\n                    handling: undefined,\n                },\n                http: {\n                    method: request.method, // Cast resource method because of case mismatch cf issue RUMF-1152\n                    status_code: request.status,\n                    url: request.url,\n                },\n                status: StatusType.error,\n                origin: ErrorSource.NETWORK,\n            },\n            domainContext,\n        });\n    }\n    return {\n        stop: () => {\n            xhrSubscription.unsubscribe();\n            fetchSubscription.unsubscribe();\n        },\n    };\n}\nfunction isRejected(request) {\n    return request.status === 0 && request.responseType !== 'opaque';\n}\nfunction format(type) {\n    if (RequestType.XHR === type) {\n        return 'XHR';\n    }\n    return 'Fetch';\n}\n//# sourceMappingURL=networkErrorCollection.js.map","import { noop, ErrorSource } from '@datadog/browser-core';\nimport { StatusType } from '../logger/isAuthorized';\nimport { createErrorFieldFromRawError } from '../createErrorFieldFromRawError';\nexport function startRuntimeErrorCollection(configuration, lifeCycle, bufferedDataObservable) {\n    if (!configuration.forwardErrorsToLogs) {\n        return { stop: noop };\n    }\n    const rawErrorSubscription = bufferedDataObservable.subscribe((bufferedData) => {\n        if (bufferedData.type === 0 /* BufferedDataType.RUNTIME_ERROR */) {\n            const error = bufferedData.error;\n            lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, {\n                rawLogsEvent: {\n                    message: error.message,\n                    date: error.startClocks.timeStamp,\n                    error: createErrorFieldFromRawError(error),\n                    origin: ErrorSource.SOURCE,\n                    status: StatusType.error,\n                },\n                messageContext: error.context,\n            });\n        }\n    });\n    return {\n        stop: () => {\n            rawErrorSubscription.unsubscribe();\n        },\n    };\n}\n//# sourceMappingURL=runtimeErrorCollection.js.map","import { AbstractLifeCycle } from '@datadog/browser-core';\nexport const LifeCycle = (AbstractLifeCycle);\n//# sourceMappingURL=lifeCycle.js.map","import { combine, ErrorSource, timeStampNow, originalConsoleMethods, globalConsole, ConsoleApiName, } from '@datadog/browser-core';\nimport { HandlerType } from '../logger';\nimport { isAuthorized, StatusType } from './isAuthorized';\nexport function startLoggerCollection(lifeCycle) {\n    function handleLog(logsMessage, logger, handlingStack, savedCommonContext, savedDate) {\n        const messageContext = combine(logger.getContext(), logsMessage.context);\n        if (isAuthorized(logsMessage.status, HandlerType.console, logger)) {\n            displayInConsole(logsMessage, messageContext);\n        }\n        if (isAuthorized(logsMessage.status, HandlerType.http, logger)) {\n            const rawLogEventData = {\n                rawLogsEvent: {\n                    date: savedDate || timeStampNow(),\n                    message: logsMessage.message,\n                    status: logsMessage.status,\n                    origin: ErrorSource.LOGGER,\n                },\n                messageContext,\n                savedCommonContext,\n                ddtags: logger.getTags(),\n            };\n            if (handlingStack) {\n                rawLogEventData.domainContext = { handlingStack };\n            }\n            lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, rawLogEventData);\n        }\n    }\n    return {\n        handleLog,\n    };\n}\nconst loggerToConsoleApiName = {\n    [StatusType.ok]: ConsoleApiName.debug,\n    [StatusType.debug]: ConsoleApiName.debug,\n    [StatusType.info]: ConsoleApiName.info,\n    [StatusType.notice]: ConsoleApiName.info,\n    [StatusType.warn]: ConsoleApiName.warn,\n    [StatusType.error]: ConsoleApiName.error,\n    [StatusType.critical]: ConsoleApiName.error,\n    [StatusType.alert]: ConsoleApiName.error,\n    [StatusType.emerg]: ConsoleApiName.error,\n};\nfunction displayInConsole({ status, message }, messageContext) {\n    originalConsoleMethods[loggerToConsoleApiName[status]].call(globalConsole, message, messageContext);\n}\n//# sourceMappingURL=loggerCollection.js.map","import { createBatch, createFlushController, createHttpRequest, createIdentityEncoder } from '@datadog/browser-core';\nexport function startLogsBatch(configuration, lifeCycle, reportError, pageMayExitObservable, session) {\n    const endpoints = [configuration.logsEndpointBuilder];\n    if (configuration.replica) {\n        endpoints.push(configuration.replica.logsEndpointBuilder);\n    }\n    const batch = createBatch({\n        encoder: createIdentityEncoder(),\n        request: createHttpRequest(endpoints, reportError),\n        flushController: createFlushController({\n            pageMayExitObservable,\n            sessionExpireObservable: session.expireObservable,\n        }),\n    });\n    lifeCycle.subscribe(1 /* LifeCycleEventType.LOG_COLLECTED */, (serverLogsEvent) => {\n        batch.add(serverLogsEvent);\n    });\n    return batch;\n}\n//# sourceMappingURL=startLogsBatch.js.map","import { getEventBridge } from '@datadog/browser-core';\nexport function startLogsBridge(lifeCycle) {\n    const bridge = getEventBridge();\n    lifeCycle.subscribe(1 /* LifeCycleEventType.LOG_COLLECTED */, (serverLogsEvent) => {\n        bridge.send('log', serverLogsEvent);\n    });\n}\n//# sourceMappingURL=startLogsBridge.js.map","export function startInternalContext(sessionManager) {\n    return {\n        get: (startTime) => {\n            const trackedSession = sessionManager.findTrackedSession(startTime);\n            if (trackedSession) {\n                return {\n                    session_id: trackedSession.id,\n                };\n            }\n        },\n    };\n}\n//# sourceMappingURL=internalContext.js.map","import { ErrorSource, addTelemetryDebug } from '@datadog/browser-core';\nimport { StatusType } from './logger/isAuthorized';\nexport function startReportError(lifeCycle) {\n    return (error) => {\n        lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, {\n            rawLogsEvent: {\n                message: error.message,\n                date: error.startClocks.timeStamp,\n                origin: ErrorSource.AGENT,\n                status: StatusType.error,\n            },\n        });\n        // monitor-until: forever, to keep an eye on the errors reported to customers\n        addTelemetryDebug('Error reported to customer', { 'error.message': error.message });\n    };\n}\n//# sourceMappingURL=reportError.js.map","import { abstractHooks } from '@datadog/browser-core';\nexport const createHooks = (abstractHooks);\n//# sourceMappingURL=hooks.js.map","import { globalObject, willSyntheticsInjectRum, SKIPPED } from '@datadog/browser-core';\nexport function startRUMInternalContext(hooks) {\n    const browserWindow = globalObject;\n    hooks.register(0 /* HookNames.Assemble */, ({ startTime }) => {\n        const internalContext = getRUMInternalContext(startTime);\n        if (!internalContext) {\n            return SKIPPED;\n        }\n        return internalContext;\n    });\n    hooks.register(1 /* HookNames.AssembleTelemetry */, ({ startTime }) => {\n        var _a, _b;\n        const internalContext = getRUMInternalContext(startTime);\n        if (!internalContext) {\n            return SKIPPED;\n        }\n        return {\n            application: { id: internalContext.application_id },\n            view: { id: (_a = internalContext.view) === null || _a === void 0 ? void 0 : _a.id },\n            action: { id: (_b = internalContext.user_action) === null || _b === void 0 ? void 0 : _b.id },\n        };\n    });\n    function getRUMInternalContext(startTime) {\n        const willSyntheticsInjectRumResult = willSyntheticsInjectRum();\n        const rumSource = willSyntheticsInjectRumResult ? browserWindow.DD_RUM_SYNTHETICS : browserWindow.DD_RUM;\n        const rumContext = getInternalContextFromRumGlobal(startTime, rumSource);\n        if (rumContext) {\n            return rumContext;\n        }\n    }\n    function getInternalContextFromRumGlobal(startTime, rumGlobal) {\n        if (rumGlobal && rumGlobal.getInternalContext) {\n            return rumGlobal.getInternalContext(startTime);\n        }\n    }\n}\n//# sourceMappingURL=rumInternalContext.js.map","import { DISCARDED, SKIPPED } from '@datadog/browser-core';\nexport function startSessionContext(hooks, configuration, sessionManager) {\n    hooks.register(0 /* HookNames.Assemble */, ({ startTime }) => {\n        const session = sessionManager.findTrackedSession(startTime);\n        const isSessionTracked = sessionManager.findTrackedSession(startTime, { returnInactive: true });\n        if (!isSessionTracked) {\n            return DISCARDED;\n        }\n        return {\n            service: configuration.service,\n            session_id: session ? session.id : undefined,\n            session: session ? { id: session.id } : undefined,\n        };\n    });\n    hooks.register(1 /* HookNames.AssembleTelemetry */, ({ startTime }) => {\n        const session = sessionManager.findTrackedSession(startTime);\n        if (!session || !session.id) {\n            return SKIPPED;\n        }\n        return {\n            session: { id: session.id },\n        };\n    });\n}\n//# sourceMappingURL=sessionContext.js.map","import { DISCARDED, SKIPPED } from '@datadog/browser-core';\nexport function startTrackingConsentContext(hooks, trackingConsentState) {\n    function isConsented() {\n        const wasConsented = trackingConsentState.isGranted();\n        if (!wasConsented) {\n            return DISCARDED;\n        }\n        return SKIPPED;\n    }\n    hooks.register(0 /* HookNames.Assemble */, isConsented);\n    hooks.register(1 /* HookNames.AssembleTelemetry */, isConsented);\n}\n//# sourceMappingURL=trackingConsentContext.js.map","import { Observable, sendToExtension, createPageMayExitObservable, willSyntheticsInjectRum, canUseEventBridge, startAccountContext, startGlobalContext, startTelemetry, createIdentityEncoder, startUserContext, isWorkerEnvironment, } from '@datadog/browser-core';\nimport { startLogsSessionManager, startLogsSessionManagerStub } from '../domain/logsSessionManager';\nimport { startLogsAssembly } from '../domain/assembly';\nimport { startConsoleCollection } from '../domain/console/consoleCollection';\nimport { startReportCollection } from '../domain/report/reportCollection';\nimport { startNetworkErrorCollection } from '../domain/networkError/networkErrorCollection';\nimport { startRuntimeErrorCollection } from '../domain/runtimeError/runtimeErrorCollection';\nimport { LifeCycle } from '../domain/lifeCycle';\nimport { startLoggerCollection } from '../domain/logger/loggerCollection';\nimport { startLogsBatch } from '../transport/startLogsBatch';\nimport { startLogsBridge } from '../transport/startLogsBridge';\nimport { startInternalContext } from '../domain/contexts/internalContext';\nimport { startReportError } from '../domain/reportError';\nimport { createHooks } from '../domain/hooks';\nimport { startRUMInternalContext } from '../domain/contexts/rumInternalContext';\nimport { startSessionContext } from '../domain/contexts/sessionContext';\nimport { startTrackingConsentContext } from '../domain/contexts/trackingConsentContext';\nconst LOGS_STORAGE_KEY = 'logs';\nexport function startLogs(configuration, getCommonContext, \n// `startLogs` and its subcomponents assume tracking consent is granted initially and starts\n// collecting logs unconditionally. As such, `startLogs` should be called with a\n// `trackingConsentState` set to \"granted\".\ntrackingConsentState, bufferedDataObservable) {\n    const lifeCycle = new LifeCycle();\n    const hooks = createHooks();\n    const cleanupTasks = [];\n    lifeCycle.subscribe(1 /* LifeCycleEventType.LOG_COLLECTED */, (log) => sendToExtension('logs', log));\n    const reportError = startReportError(lifeCycle);\n    // Page exit is not observable in worker environments (no window/document events)\n    const pageMayExitObservable = isWorkerEnvironment\n        ? new Observable()\n        : createPageMayExitObservable(configuration);\n    const telemetry = startTelemetry(\"browser-logs-sdk\" /* TelemetryService.LOGS */, configuration, hooks, reportError, pageMayExitObservable, createIdentityEncoder);\n    cleanupTasks.push(telemetry.stop);\n    const session = configuration.sessionStoreStrategyType && !canUseEventBridge() && !willSyntheticsInjectRum()\n        ? startLogsSessionManager(configuration, trackingConsentState)\n        : startLogsSessionManagerStub(configuration);\n    startTrackingConsentContext(hooks, trackingConsentState);\n    // Start user and account context first to allow overrides from global context\n    startSessionContext(hooks, configuration, session);\n    const accountContext = startAccountContext(hooks, configuration, LOGS_STORAGE_KEY);\n    const userContext = startUserContext(hooks, configuration, session, LOGS_STORAGE_KEY);\n    const globalContext = startGlobalContext(hooks, configuration, LOGS_STORAGE_KEY, false);\n    startRUMInternalContext(hooks);\n    startNetworkErrorCollection(configuration, lifeCycle);\n    startRuntimeErrorCollection(configuration, lifeCycle, bufferedDataObservable);\n    bufferedDataObservable.unbuffer();\n    startConsoleCollection(configuration, lifeCycle);\n    startReportCollection(configuration, lifeCycle);\n    const { handleLog } = startLoggerCollection(lifeCycle);\n    startLogsAssembly(configuration, lifeCycle, hooks, getCommonContext, reportError);\n    if (!canUseEventBridge()) {\n        const { stop: stopLogsBatch } = startLogsBatch(configuration, lifeCycle, reportError, pageMayExitObservable, session);\n        cleanupTasks.push(() => stopLogsBatch());\n    }\n    else {\n        startLogsBridge(lifeCycle);\n    }\n    const internalContext = startInternalContext(session);\n    return {\n        handleLog,\n        getInternalContext: internalContext.get,\n        accountContext,\n        globalContext,\n        userContext,\n        stop: () => {\n            cleanupTasks.forEach((task) => task());\n        },\n    };\n}\n//# sourceMappingURL=startLogs.js.map","/**\n *\n * Datadog Browser Logs SDK for collecting and forwarding browser logs to Datadog.\n * Provides comprehensive logging capabilities with automatic error tracking and custom log collection.\n *\n * @packageDocumentation\n * @see [Browser Log Collection](https://docs.datadoghq.com/logs/log_collection/javascript/)\n */\nimport { defineGlobal, getGlobalObject } from '@datadog/browser-core';\nimport { makeLogsPublicApi } from '../boot/logsPublicApi';\nimport { startLogs } from '../boot/startLogs';\nexport { Logger, HandlerType } from '../domain/logger';\nexport { StatusType } from '../domain/logger/isAuthorized';\n/**\n * The global Logs instance. Use this to call Logs methods.\n *\n * @category Main\n * @see {@link DatadogLogs}\n * @see [Browser Log Collection](https://docs.datadoghq.com/logs/log_collection/javascript/)\n */\nexport const datadogLogs = makeLogsPublicApi(startLogs);\ndefineGlobal(getGlobalObject(), 'DD_LOGS', datadogLogs);\n//# sourceMappingURL=main.js.map"],"names":["isAuthorized","status","handlerType","logger","loggerHandler","sanitizedHandlerType","STATUS_PRIORITIES","StatusType","createErrorFieldFromRawError","rawError","includeMessage","__decorate","decorators","target","key","desc","c","r","d","i","HandlerType","STATUSES","Logger","handleLogStrategy","name","level","loggerContext","createContextManager","message","messageContext","error","handlingStack","sanitizedMessageContext","sanitize","context","computeRawError","ErrorSource","clocksNow","combine","createHandlingStack","value","buildTag","sanitizedKey","sanitizeTag","tag","handler","monitored","createLoggerMethod","buildCommonContext","isWorkerEnvironment","DEFAULT_REQUEST_ERROR_RESPONSE_LENGTH_LIMIT","ONE_KIBI_BYTE","validateAndBuildLogsConfiguration","initConfiguration","errorStack","display","baseConfiguration","validateAndBuildConfiguration","forwardConsoleLogs","validateAndBuildForwardOption","objectValues","ConsoleApiName","forwardReports","RawReportType","option","allowedValues","label","api","removeDuplicates","serializeLogsConfiguration","configuration","baseSerializedInitConfiguration","serializeConfiguration","createPreStartStrategy","getCommonContext","trackingConsentState","doStartLogs","bufferApiCalls","createBoundedBuffer","globalContext","buildGlobalContextManager","bufferContextCalls","CustomerContextKey","accountContext","buildAccountContextManager","userContext","buildUserContextManager","cachedInitConfiguration","cachedConfiguration","trackingConsentStateSubscription","tryStartLogs","startLogsResult","initFeatureFlags","canUseEventBridge","overrideInitConfigurationForBridge","addTelemetryConfiguration","displayAlreadyInitializedError","initFetchObservable","noop","statusType","date","timeStampNow","makeLogsPublicApi","startLogsImpl","createTrackingConsentState","bufferedDataObservable","startBufferingData","strategy","createPostStartStrategy","getStrategy","customLoggers","mainLogger","params","makePublicApi","callMonitored","monitor","trackingConsent","addTelemetryUsage","defineContextMethod","ContextManagerMethod","conf","deepClone","startTime","LOGS_SESSION_KEY","startLogsSessionManager","sessionManager","startSessionManager","rawTrackingType","computeTrackingType","options","session","startLogsSessionManagerStub","Observable","hasValidLoggerSession","performDraw","trackingType","startLogsAssembly","lifeCycle","hooks","reportError","eventRateLimit","statusWithCustom","logRateLimiters","createEventRateLimiter","rawLogsEvent","savedCommonContext","domainContext","ddtags","_a","_b","getRelativeTime","commonContext","defaultLogsEventAttributes","DISCARDED","defaultDdtags","buildTags","log","LogStatusForApi","startConsoleCollection","consoleSubscription","initConsoleObservable","collectedData","startReportCollection","reportSubscription","initReportObservable","getFileFromStackTraceString","startNetworkErrorCollection","xhrSubscription","initXhrObservable","handleResponse","RequestType","fetchSubscription","isNetworkError","request","isIntakeUrl","isRejected","isServerError","type","stack","toStackTraceString","computeStackTrace","format","safeTruncate","startRuntimeErrorCollection","rawErrorSubscription","bufferedData","LifeCycle","AbstractLifeCycle","startLoggerCollection","handleLog","logsMessage","savedDate","displayInConsole","rawLogEventData","loggerToConsoleApiName","originalConsoleMethods","globalConsole","startLogsBatch","pageMayExitObservable","endpoints","batch","createBatch","createIdentityEncoder","createHttpRequest","createFlushController","serverLogsEvent","startLogsBridge","bridge","getEventBridge","startInternalContext","trackedSession","startReportError","addTelemetryDebug","createHooks","abstractHooks","startRUMInternalContext","browserWindow","globalObject","internalContext","getRUMInternalContext","SKIPPED","rumSource","willSyntheticsInjectRum","rumContext","getInternalContextFromRumGlobal","rumGlobal","startSessionContext","startTrackingConsentContext","isConsented","LOGS_STORAGE_KEY","startLogs","cleanupTasks","sendToExtension","createPageMayExitObservable","telemetry","startTelemetry","startAccountContext","startUserContext","startGlobalContext","stopLogsBatch","task","datadogLogs","defineGlobal","getGlobalObject"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]}