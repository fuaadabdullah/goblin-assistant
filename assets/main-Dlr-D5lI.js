import{R as T,r as s}from"./index-CU8wI_xk.js";import{R as C}from"./privacyConstants-201sPjeh.js";import{G as D,b as v,H as w,W as x,X as I,g as L,e as P,P as S,B as A}from"./resourceUtils-CpcWtzjX.js";let c,u,p;const k=[],y=[];function O(e={}){return{name:"react",onInit({publicApi:t,initConfiguration:r}){c=t,u=e;for(const o of k)o(u,c);e.router&&(r.trackViewsManually=!0)},onRumStart({addEvent:t}){p=t;for(const r of y)t&&r(t)},getConfigurationTelemetry(){return{router:!!e.router}}}}function N(e){u&&c?e(u,c):k.push(e)}function U(e){p?e(p):y.push(e)}function B(e,t){const r=D("react error"),o=v();U(i=>{w(()=>{var a;const n=x({originalError:e,handlingStack:r,componentStack:(a=t.componentStack)!==null&&a!==void 0?a:void 0,startClocks:o,source:I.CUSTOM,handling:"handled",nonErrorPrefix:"Provided"});i(o.relative,{type:C.ERROR,date:n.startClocks.timeStamp,error:{id:L(),message:n.message,source:n.source,stack:n.stack,handling_stack:n.handlingStack,component_stack:n.componentStack,type:n.type,handling:n.handling,causes:n.causes,source_type:"browser",csp:n.csp},context:{framework:"react",...n.context}},{error:n.originalError,handlingStack:n.handlingStack})})})}const R={didCatch:!1,error:null};class G extends T.Component{constructor(t){super(t),this.resetError=()=>{this.setState(R)},this.state=R}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}componentDidCatch(t,r){B(t,r)}render(){return this.state.didCatch?T.createElement(this.props.fallback,{error:this.state.error,resetError:this.resetError}):this.props.children}}function f(){let e,t,r;return{startTimer(){t=A(),r=S()},stopTimer(){e=P(r,S())},getDuration(){return e},getStartTime(){return t}}}const F=(e,t)=>{N((r,o)=>{o.addDurationVital(e,t)})},W=({name:e,children:t})=>{const r=s.useRef(!0),o=f(),i=f(),a=f(),n=()=>{var l,m,d;const E=(l=o.getDuration())!==null&&l!==void 0?l:0,g=(m=i.getDuration())!==null&&m!==void 0?m:0,h=(d=a.getDuration())!==null&&d!==void 0?d:0,b=E+g+h;F("reactComponentRender",{description:e,startTime:o.getStartTime(),duration:b,context:{is_first_render:r.current,render_phase_duration:E,effect_phase_duration:g,layout_effect_phase_duration:h,framework:"react"}}),r.current=!1};return s.createElement(s.Fragment,null,s.createElement(_,{onRender:o.startTimer,onLayoutEffect:a.startTimer,onEffect:i.startTimer}),t,s.createElement(_,{onRender:o.stopTimer,onLayoutEffect:a.stopTimer,onEffect:()=>{i.stopTimer(),n()}}))};function _({onRender:e,onLayoutEffect:t,onEffect:r}){return e(),s.useLayoutEffect(t),s.useEffect(r),null}export{G as ErrorBoundary,W as UNSTABLE_ReactComponentTracker,B as addReactError,O as reactPlugin};
//# sourceMappingURL=main-Dlr-D5lI.js.map
