{
  "name": "Goblin Assistant - High Provider Fallback Rate",
  "type": "metric alert",
  "query": "avg(last_15m):(sum:goblin.provider.fallbacks{env:production,fallback_used:true} / (sum:goblin.provider.fallbacks{env:production,fallback_used:true} + sum:goblin.provider.fallbacks{env:production,fallback_used:false})) * 100 > 5",
  "message": "ðŸ”„ **WARNING**: Goblin Assistant provider fallback rate exceeded 5% threshold\n\n**Current Value**: {{value}}%\n**Threshold**: 5%\n\n**Impact**: Increased use of mock/fallback responses\n**Action Required**: Check primary provider health, API keys, rate limits, or circuit breakers\n\n**Dashboard**: {{host.name}} - [Admin Dashboard](http://{{host.name}}/mcp/v1/admin/dashboard)\n\n@slack-alerts @team-platform",
  "tags": ["service:goblin-assistant", "env:production", "kpi:fallback"],
  "options": {
    "thresholds": {
      "critical": 5,
      "warning": 2
    },
    "notify_no_data": true,
    "no_data_timeframe": 900,
    "renotify_interval": 20,
    "timeout_h": 0,
    "evaluation_delay": 300,
    "new_host_delay": 300,
    "include_tags": true,
    "require_full_window": false
  },
  "priority": 2
}
