import{n as I,H as J,G as Ee,s as F,K as y,ag as G,ar as q,as as Xe,W as he,b as m,X as A,at as We,r as _,au as Qe,av as Se,m as v,a as S,M as Je,am as Ce,aw as ve,af as Ze,aq as T,j as Te,O as _e,ax as we,N as $,Q as x,i as Oe,E as Ie,F as oe,a0 as Ae,aj as xe,ay as Re,az as H,aA as et,c as tt,ai as re,aB as ke,aC as nt,V as Me,aD as st,p as k,aE as ot,ab as rt,an as Be,aF as it,aG as at,a5 as Ne,P as Z,a7 as ct,Y as ut,a9 as ie,aH as lt,a4 as dt,aI as ft,d as V,aJ as pt,aK as yt,aL as gt,S as bt,aM as ee,aN as mt,a1 as Et,aO as ht,aP as De,e as St,B as Ct,l as vt,ae as Tt,ap as j,f as D,aQ as _t,a8 as ae}from"./resourceUtils-CpcWtzjX.js";function h(e,t,n,{computeHandlingStack:s}={}){let o=e[t];if(typeof o!="function")if(t in e&&t.startsWith("on"))o=I;else return{stop:I};let r=!1;const i=function(){if(r)return o.apply(this,arguments);const a=Array.from(arguments);let c;J(n,null,[{target:this,parameters:a,onPostCall:u=>{c=u},handlingStack:s?Ee("instrumented method"):void 0}]);const d=o.apply(this,a);return c&&J(c,null,[d]),d};return e[t]=i,{stop:()=>{r=!0,e[t]===i&&(e[t]=o)}}}function os(e,t,n){const s=Object.getOwnPropertyDescriptor(e,t);if(!s||!s.set||!s.configurable)return{stop:I};const o=I;let r=(a,c)=>{F(()=>{r!==o&&n(a,c)},0)};const i=function(a){s.set.call(this,a),r(this,a)};return Object.defineProperty(e,t,{set:i}),{stop:()=>{var a;((a=Object.getOwnPropertyDescriptor(e,t))===null||a===void 0?void 0:a.set)===i&&Object.defineProperty(e,t,s),r=o}}}function wt(){return new y(e=>{const t=(o,r)=>{const i=he({stackTrace:r,originalError:o,startClocks:m(),nonErrorPrefix:"Uncaught",source:A.SOURCE,handling:"unhandled"});e.notify(i)},{stop:n}=Ot(t),{stop:s}=It(t);return()=>{n(),s()}})}function Ot(e){return h(G(),"onerror",({parameters:[t,n,s,o,r]})=>{let i;q(r)||(i=Xe(t,n,s,o)),e(r??t,i)})}function It(e){return h(G(),"onunhandledrejection",({parameters:[t]})=>{e(t.reason||"Empty reason")})}function rs(e){const t={version:"6.24.1",onReady(n){n()},...e};return Object.defineProperty(t,"_setDebug",{get(){return We},enumerable:!1}),t}function is(e,t,n){const s=e[t];s&&!s.q&&s.version&&_.warn("SDK is loaded more than once. This is unsupported and might have unexpected behavior."),e[t]=n,s&&s.q&&s.q.forEach(o=>Qe(o,"onReady callback threw an error:")())}function as(e,t){t.silentMultipleInit||_.error(`${e} is already initialized.`)}const te={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function cs(e,t){const n=[];t.includes(te.cspViolation)&&n.push(xt(e));const s=t.filter(o=>o!==te.cspViolation);return s.length&&n.push(At(s)),Se(...n)}function At(e){return new y(t=>{if(!window.ReportingObserver)return;const n=v((o,r)=>o.forEach(i=>t.notify(Rt(i)))),s=new window.ReportingObserver(n,{types:e,buffered:!0});return s.observe(),()=>{s.disconnect()}})}function xt(e){return new y(t=>{const{stop:n}=S(e,document,"securitypolicyviolation",s=>{t.notify(kt(s))});return n})}function Rt(e){const{type:t,body:n}=e;return Le({type:n.id,message:`${t}: ${n.message}`,originalError:e,stack:Ue(n.id,n.message,n.sourceFile,n.lineNumber,n.columnNumber)})}function kt(e){const t=`'${e.blockedURI}' blocked by '${e.effectiveDirective}' directive`;return Le({type:e.effectiveDirective,message:`${te.cspViolation}: ${t}`,originalError:e,csp:{disposition:e.disposition},stack:Ue(e.effectiveDirective,e.originalPolicy?`${t} of the policy "${Je(e.originalPolicy,100,"...")}"`:"no policy",e.sourceFile,e.lineNumber,e.columnNumber)})}function Le(e){return{startClocks:m(),source:A.REPORT,handling:"unhandled",...e}}function Ue(e,t,n,s,o){return n?Ce({name:e,message:t,stack:[{func:"?",url:n,line:s??void 0,column:o??void 0}]}):void 0}const Mt=200;function Bt(e){const{env:t,service:n,version:s,datacenter:o,sdkVersion:r,variant:i}=e,a=[C("sdk_version",r??"6.24.1")];return t&&a.push(C("env",t)),n&&a.push(C("service",n)),s&&a.push(C("version",s)),o&&a.push(C("datacenter",o)),i&&a.push(C("variant",i)),a}function C(e,t){const n=t?`${e}:${t}`:e;return(n.length>Mt||Dt(n))&&_.warn(`Tag ${n} doesn't meet tag requirements and will be sanitized. ${ve} ${Ze}/getting_started/tagging/#defining-tags`),Nt(n)}function Nt(e){return e.replace(/,/g,"_")}function Dt(e){return Lt()?new RegExp("[^\\p{Ll}\\p{Lo}0-9_:./-]","u").test(e):!1}function Lt(){try{return new RegExp("[\\p{Ll}]","u"),!0}catch{return!1}}function Ut(e,t){const n=T.__ddBrowserSdkExtensionCallback;n&&n({type:e,payload:t})}function L(e,t,n=Ft()){if(t===void 0)return e;if(typeof t!="object"||t===null)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=t.flags||[t.global?"g":"",t.ignoreCase?"i":"",t.multiline?"m":"",t.sticky?"y":"",t.unicode?"u":""].join("");return new RegExp(t.source,o)}if(n.hasAlreadyBeenSeen(t))return;if(Array.isArray(t)){const o=Array.isArray(e)?e:[];for(let r=0;r<t.length;++r)o[r]=L(o[r],t[r],n);return o}const s=Te(e)==="object"?e:{};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(s[o]=L(s[o],t[o],n));return s}function Pt(e){return L(void 0,e)}function U(...e){let t;for(const n of e)n!=null&&(t=L(t,n));return t}function Ft(){if(typeof WeakSet<"u"){const t=new WeakSet;return{hasAlreadyBeenSeen(n){const s=t.has(n);return s||t.add(n),s}}}const e=[];return{hasAlreadyBeenSeen(t){const n=e.indexOf(t)>=0;return n||e.push(t),n}}}function Gt(){var e;const t=T.navigator;return{status:t.onLine?"connected":"not_connected",interfaces:t.connection&&t.connection.type?[t.connection.type]:void 0,effective_type:(e=t.connection)===null||e===void 0?void 0:e.effectiveType}}function qt(e){return e>=500}function $t(e){try{return e.clone()}catch{return}}const Ht=80*$,Kt=32,Pe=20*we,Vt=x,Fe=_e;function Ge(e,t,n,s,o,r){t.transportStatus===0&&t.queuedPayloads.size()===0&&t.bandwidthMonitor.canHandle(e)?$e(e,t,n,r,{onSuccess:()=>He(0,t,n,s,o,r),onFailure:()=>{t.queuedPayloads.enqueue(e)||r.notify({type:"queue-full",bandwidth:t.bandwidthMonitor.stats(),payload:e}),qe(t,n,s,o,r)}}):t.queuedPayloads.enqueue(e)||r.notify({type:"queue-full",bandwidth:t.bandwidthMonitor.stats(),payload:e})}function qe(e,t,n,s,o){e.transportStatus===2&&F(()=>{const r=e.queuedPayloads.first();$e(r,e,t,o,{onSuccess:()=>{e.queuedPayloads.dequeue(),e.currentBackoffTime=Fe,He(1,e,t,n,s,o)},onFailure:()=>{e.currentBackoffTime=Math.min(Vt,e.currentBackoffTime*2),qe(e,t,n,s,o)}})},e.currentBackoffTime)}function $e(e,t,n,s,{onSuccess:o,onFailure:r}){t.bandwidthMonitor.add(e),n(e,i=>{t.bandwidthMonitor.remove(e),jt(i)?(t.transportStatus=t.bandwidthMonitor.ongoingRequestCount>0?1:2,e.retry={count:e.retry?e.retry.count+1:1,lastFailureStatus:i.status},s.notify({type:"failure",bandwidth:t.bandwidthMonitor.stats(),payload:e}),r()):(t.transportStatus=0,s.notify({type:"success",bandwidth:t.bandwidthMonitor.stats(),payload:e}),o())})}function He(e,t,n,s,o,r){e===0&&t.queuedPayloads.isFull()&&!t.queueFullReported&&(o({message:`Reached max ${s} events size queued for upload: ${Pe/we}MiB`,source:A.AGENT,startClocks:m()}),t.queueFullReported=!0);const i=t.queuedPayloads;for(t.queuedPayloads=Ke();i.size()>0;)Ge(i.dequeue(),t,n,s,o,r)}function jt(e){return e.type!=="opaque"&&(e.status===0&&!navigator.onLine||e.status===408||e.status===429||qt(e.status))}function Yt(){return{transportStatus:0,currentBackoffTime:Fe,bandwidthMonitor:zt(),queuedPayloads:Ke(),queueFullReported:!1}}function Ke(){const e=[];return{bytesCount:0,enqueue(t){return this.isFull()?!1:(e.push(t),this.bytesCount+=t.bytesCount,!0)},first(){return e[0]},dequeue(){const t=e.shift();return t&&(this.bytesCount-=t.bytesCount),t},size(){return e.length},isFull(){return this.bytesCount>=Pe}}}function zt(){return{ongoingRequestCount:0,ongoingByteCount:0,canHandle(e){return this.ongoingRequestCount===0||this.ongoingByteCount+e.bytesCount<=Ht&&this.ongoingRequestCount<Kt},add(e){this.ongoingRequestCount+=1,this.ongoingByteCount+=e.bytesCount},remove(e){this.ongoingRequestCount-=1,this.ongoingByteCount-=e.bytesCount},stats(){return{ongoingByteCount:this.ongoingByteCount,ongoingRequestCount:this.ongoingRequestCount}}}}const ne=16*$;function Xt(e,t,n=ne){const s=new y,o=Yt();return{observable:s,send:r=>{for(const i of e)Ge(r,o,(a,c)=>{Oe(Ie.AVOID_FETCH_KEEPALIVE)?P(i,a,c):Jt(i,n,a,c)},i.trackType,t,s)},sendOnExit:r=>{for(const i of e)Wt(i,n,r)}}}function Wt(e,t,n){if(!!navigator.sendBeacon&&n.bytesCount<t)try{const o=e.build("beacon",n);if(navigator.sendBeacon(o,n.data))return}catch(o){Qt(o)}P(e,n)}let ye=!1;function Qt(e){ye||(ye=!0,oe(e))}function Jt(e,t,n,s){if(Zt()&&n.bytesCount<t){const r=e.build("fetch-keepalive",n);fetch(r,{method:"POST",body:n.data,keepalive:!0,mode:"cors"}).then(v(i=>s==null?void 0:s({status:i.status,type:i.type}))).catch(v(()=>P(e,n,s)))}else P(e,n,s)}function P(e,t,n){const s=e.build("fetch",t);fetch(s,{method:"POST",body:t.data,mode:"cors"}).then(v(o=>n==null?void 0:n({status:o.status,type:o.type}))).catch(v(()=>n==null?void 0:n({status:0})))}function Zt(){try{return window.Request&&"keepalive"in new Request("http://a")}catch{return!1}}function ce(){const e=tn();if(e)return{getCapabilities(){var t;return JSON.parse(((t=e.getCapabilities)===null||t===void 0?void 0:t.call(e))||"[]")},getPrivacyLevel(){var t;return(t=e.getPrivacyLevel)===null||t===void 0?void 0:t.call(e)},getAllowedWebViewHosts(){return JSON.parse(e.getAllowedWebViewHosts())},send(t,n,s){const o=s?{id:s}:void 0;e.send(JSON.stringify({eventType:t,event:n,view:o}))}}}function us(e){const t=ce();return!!t&&t.getCapabilities().includes(e)}function en(e){var t;e===void 0&&(e=(t=G().location)===null||t===void 0?void 0:t.hostname);const n=ce();return!!n&&n.getAllowedWebViewHosts().some(s=>e===s||e.endsWith(`.${s}`))}function tn(){return G().DatadogEventBridge}const B={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function ls(e){return new y(t=>{const{stop:n}=Ae(e,window,["visibilitychange","freeze"],o=>{o.type==="visibilitychange"&&document.visibilityState==="hidden"?t.notify({reason:B.HIDDEN}):o.type==="freeze"&&t.notify({reason:B.FROZEN})},{capture:!0}),s=S(e,window,"beforeunload",()=>{t.notify({reason:B.UNLOADING})}).stop;return()=>{n(),s()}})}function nn(e){return xe(B).includes(e)}const ge=256*$;function sn({encoder:e,request:t,flushController:n}){let s={};const o=n.flushObservable.subscribe(u=>d(u));function r(u,l,f){n.notifyBeforeAddMessage(l),f!==void 0?(s[f]=u,n.notifyAfterAddMessage()):e.write(e.isEmpty?u:`
${u}`,p=>{n.notifyAfterAddMessage(p-l)})}function i(u){return u!==void 0&&s[u]!==void 0}function a(u){const l=s[u];delete s[u];const f=e.estimateEncodedBytesCount(l);n.notifyAfterRemoveMessage(f)}function c(u,l){const f=H(u),p=e.estimateEncodedBytesCount(f);if(p>=ge){_.warn(`Discarded a message whose size was bigger than the maximum allowed size ${ge/$}KiB. ${ve} ${et}/#technical-limitations`);return}i(l)&&a(l),r(f,p,l)}function d(u){const l=xe(s).join(`
`);s={};const f=nn(u.reason),p=f?t.sendOnExit:t.send;if(f&&e.isAsync){const b=e.finishSync();b.outputBytesCount&&p(be(b));const g=[b.pendingData,l].filter(Boolean).join(`
`);g&&p({data:g,bytesCount:Re(g)})}else l&&e.write(e.isEmpty?l:`
${l}`),e.finish(b=>{p(be(b))})}return{flushController:n,add:c,upsert:c,stop:o.unsubscribe}}function be(e){let t;return typeof e.output=="string"?t=e.output:t=new Blob([e.output],{type:"text/plain"}),{data:t,bytesCount:e.outputBytesCount,encoding:e.encoding}}const on=30*_e,rn=re?1:50;function an({pageMayExitObservable:e,sessionExpireObservable:t}){const n=e.subscribe(l=>a(l.reason)),s=t.subscribe(()=>a("session_expire")),o=new y(()=>()=>{n.unsubscribe(),s.unsubscribe()});let r=0,i=0;function a(l){if(i===0)return;const f=i,p=r;i=0,r=0,u(),o.notify({reason:l,messagesCount:f,bytesCount:p})}let c;function d(){c===void 0&&(c=F(()=>{a("duration_limit")},on))}function u(){tt(c),c=void 0}return{flushObservable:o,get messagesCount(){return i},notifyBeforeAddMessage(l){r+l>=ne&&a("bytes_limit"),i+=1,r+=l,d()},notifyAfterAddMessage(l=0){r+=l,i>=rn?a("messages_limit"):r>=ne&&a("bytes_limit")},notifyAfterRemoveMessage(l){r-=l,i-=1,i===0&&u()}}}const se="DISCARDED",ue="SKIPPED";function ds(){const e={};return{register(t,n){return e[t]||(e[t]=[]),e[t].push(n),{unregister:()=>{e[t]=e[t].filter(s=>s!==n)}}},triggerHook(t,n){const s=e[t]||[],o=[];for(const r of s){const i=r(n);if(i===se)return se;i!==ue&&o.push(i)}return U(...o)}}}const E={LOG:"log",CONFIGURATION:"configuration",USAGE:"usage"},cn=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","https://d3uc069fcn7uxw.cloudfront.net","https://d20xtzwzcl0ceb.cloudfront.net","http://localhost","<anonymous>"],un=1,ln=[st],dn=15;let Y;function w(){return Y||(Y=new ke(100)),Y}function fs(e,t,n,s,o,r){const i=new y,{stop:a}=pn(t,s,o,r,i),{enabled:c,metricsEnabled:d}=fn(e,t,n,i);return{stop:a,enabled:c,metricsEnabled:d}}function fn(e,t,n,s,o=un,r=dn){const i={},a=!ln.includes(t.site)&&k(t.telemetrySampleRate),c={[E.LOG]:a,[E.CONFIGURATION]:a&&k(t.telemetryConfigurationSampleRate),[E.USAGE]:a&&k(t.telemetryUsageSampleRate),metric:a&&k(o)},d=yn(),u=w();return u.subscribe(({rawEvent:f,metricName:p})=>{if(p&&!c.metric||!c[f.type])return;const b=p||f.status||f.type;let g=i[b];if(g||(g=i[b]=new Set),g.size>=r)return;const K=H(f);if(g.has(K))return;const R=n.triggerHook(1,{startTime:m().relative});if(R===se)return;const pe=l(R,e,f,d);s.notify(pe),Ut("telemetry",pe),g.add(K)}),u.unbuffer(),at(bn),{enabled:a,metricsEnabled:c.metric};function l(f,p,b,g){const R={type:"telemetry",date:m().timeStamp,service:p,version:"6.24.1",source:"browser",_dd:{format_version:2},telemetry:U(b,{runtime_env:g,connectivity:Gt(),sdk_setup:"npm"}),ddtags:Bt(t).join(","),experimental_features:Array.from(ot())};return U(R,f)}}function pn(e,t,n,s,o){const r=[];if(en()){const i=ce(),a=o.subscribe(c=>i.send("internal_telemetry",c));r.push(a.unsubscribe)}else{const i=[e.rumEndpointBuilder];e.replica&&gn(e)&&i.push(e.replica.rumEndpointBuilder);const a=sn({encoder:s(4),request:Xt(i,t),flushController:an({pageMayExitObservable:n,sessionExpireObservable:new y})});r.push(a.stop);const c=o.subscribe(a.add);r.push(c.unsubscribe)}return{stop:()=>r.forEach(i=>i())}}function yn(){var e;return{is_local_file:((e=T.location)===null||e===void 0?void 0:e.protocol)==="file:",is_worker:re}}function gn(e){return e.site===rt}function Ve(e,t){nt(Me.debug,e,t),w().notify({rawEvent:{type:E.LOG,message:e,status:"debug",...t}})}function bn(e,t){w().notify({rawEvent:{type:E.LOG,status:"error",...En(e),...t}})}function ps(e){w().notify({rawEvent:{type:E.CONFIGURATION,configuration:e}})}function ys(e,t){w().notify({rawEvent:{type:E.LOG,message:e,status:"debug",...t},metricName:e})}function mn(e){w().notify({rawEvent:{type:E.USAGE,usage:e}})}function En(e){if(q(e)){const t=Be(e);return{error:{kind:t.name,stack:Ce(hn(t))},message:t.message}}return{error:{stack:it},message:`Uncaught ${H(e)}`}}function hn(e){return e.stack=e.stack.filter(t=>!t.url||cn.some(n=>t.url.startsWith(n))),e}function gs(e){const t=new Set;return e.forEach(n=>t.add(n)),Array.from(t)}function je(e,t){const n=e.indexOf(t);n>=0&&e.splice(n,1)}function bs(e){return Array.isArray(e)&&e.length>0}const M=1/0,Sn=x;let O=null;const N=new Set;function Cn(){N.forEach(e=>e())}function vn({expireDelay:e,maxEntries:t}){let n=[];O||(O=Ne(()=>Cn(),Sn));const s=()=>{const u=Z()-e;for(;n.length>0&&n[n.length-1].endTime<u;)n.pop()};N.add(s);function o(u,l){const f={value:u,startTime:l,endTime:M,remove:()=>{je(n,f)},close:p=>{f.endTime=p}};return t&&n.length>=t&&n.pop(),n.unshift(f),f}function r(u=M,l={returnInactive:!1}){for(const f of n)if(f.startTime<=u){if(l.returnInactive||u<=f.endTime)return f.value;break}}function i(u){const l=n[0];l&&l.endTime===M&&l.close(u)}function a(u=M,l=0){const f=ut(u,l);return n.filter(p=>p.startTime<=f&&u<=p.endTime).map(p=>p.value)}function c(){n=[]}function d(){N.delete(s),N.size===0&&O&&(ct(O),O=null)}return{add:o,find:r,closeActive:i,findAll:a,reset:c,stop:d}}const Tn="datadog-synthetics-public-id",_n="datadog-synthetics-result-id",wn="datadog-synthetics-injects-rum";function ms(){return re?!1:!!(T._DATADOG_SYNTHETICS_INJECTS_RUM||ie(wn))}function On(){const e=window._DATADOG_SYNTHETICS_PUBLIC_ID||ie(Tn);return typeof e=="string"?e:void 0}function In(){const e=window._DATADOG_SYNTHETICS_RESULT_ID||ie(_n);return typeof e=="string"?e:void 0}function An(){return!!(On()&&In())}const xn=x,Rn=bt;function Es(e,t,n,s){const o=new y,r=new y,i=lt(e.sessionStoreStrategyType,e,t,n),a=vn({expireDelay:Rn});if(i.renewObservable.subscribe(()=>{a.add(c(),Z()),o.notify()}),i.expireObservable.subscribe(()=>{r.notify(),a.closeActive(Z())}),i.expandOrRenewSession(),a.add(c(),dt().relative),Oe(Ie.SHORT_SESSION_INVESTIGATION)){const d=i.getSession();d&&Dn(e,d)}s.observable.subscribe(()=>{s.isGranted()?i.expandOrRenewSession():i.expire(!1)}),kn(e,()=>{s.isGranted()&&i.expandOrRenewSession()}),Mn(e,()=>i.expandSession()),Bn(e,()=>i.restartSession());function c(){const d=i.getSession();return d?{id:d.id,trackingType:d[t],isReplayForced:!!d.forcedReplay,anonymousId:d.anonymousId}:(Nn(e).catch(()=>{}),{id:"invalid",trackingType:ft,isReplayForced:!1,anonymousId:void 0})}return{findSession:(d,u)=>a.find(d,u),renewObservable:o,expireObservable:r,sessionStateUpdateObservable:i.sessionStateUpdateObservable,expire:i.expire,updateSessionState:i.updateSessionState}}function kn(e,t){const{stop:n}=Ae(e,window,["click","touchstart","keydown","scroll"],t,{capture:!0,passive:!0})}function Mn(e,t){const n=()=>{document.visibilityState==="visible"&&t()},{stop:s}=S(e,document,"visibilitychange",n);Ne(n,xn)}function Bn(e,t){const{stop:n}=S(e,window,"resume",t,{capture:!0})}async function Nn(e){const t=e.sessionStoreStrategyType;if(!t)return;let n,s;t.type===pt.COOKIE?(n=yt(t.cookieOptions,e),s={cookie:await Ye(),currentDomain:`${window.location.protocol}//${window.location.hostname}`}):n=gt(),Ve("Unexpected session state",{sessionStoreStrategyType:t.type,session:n,isSyntheticsTest:An(),createdTimestamp:n==null?void 0:n.created,expireTimestamp:n==null?void 0:n.expire,...s})}function Dn(e,t){if(!window.cookieStore||!t.created)return;const n=Number(t.created),s=V(),{stop:o}=S(e,cookieStore,"change",r);function r(i){const a=Et(i.changed,d=>d.name===ee);if(!a)return;const c=V()-n;if(c>14*x)o();else{const d=ht(a.value);if(d.id&&d.id!==t.id){o();const u=V()-s;Ye().then(l=>{Ve("Session cookie changed",{time:u,session_age:c,old:t,new:d,cookie:l})}).catch(oe)}}}}async function Ye(){let e;return"cookieStore"in window?e=await window.cookieStore.getAll(ee):e=document.cookie.split(/\s*;\s*/).filter(t=>t.startsWith(ee)),{count:e.length,domain:mt()||"undefined",...e}}function hs(){let e="",t=0;return{isAsync:!1,get isEmpty(){return!e},write(n,s){const o=Re(n);t+=o,e+=n,s&&s(o)},finish(n){n(this.finishSync())},finishSync(){const n={output:e,outputBytesCount:t,rawBytesCount:t,pendingData:""};return e="",t=0,n},estimateEncodedBytesCount(n){return n.length}}}class Ss{constructor(){this.callbacks={}}notify(t,n){const s=this.callbacks[t];s&&s.forEach(o=>o(n))}subscribe(t,n){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(n),{unsubscribe:()=>{this.callbacks[t]=this.callbacks[t].filter(s=>n!==s)}}}}const Ln=3e3;function Cs(e,t,n=Ln){let s=0,o=!1;return{isLimitReached(){if(s===0&&F(()=>{s=0},x),s+=1,s<=n||o)return o=!1,!1;if(s===n+1){o=!0;try{t({message:`Reached max number of ${e}s by minute: ${n}`,source:A.AGENT,startClocks:m()})}finally{o=!1}}return!0}}}let z;const le=new WeakMap;function vs(e){return z||(z=Un(e)),z}function Un(e){return new y(t=>{const{stop:n}=h(XMLHttpRequest.prototype,"open",Pn),{stop:s}=h(XMLHttpRequest.prototype,"send",r=>{Fn(r,e,t)},{computeHandlingStack:!0}),{stop:o}=h(XMLHttpRequest.prototype,"abort",Gn);return()=>{n(),s(),o()}})}function Pn({target:e,parameters:[t,n]}){le.set(e,{state:"open",method:String(t).toUpperCase(),url:De(String(n))})}function Fn({target:e,parameters:[t],handlingStack:n},s,o){const r=le.get(e);if(!r)return;const i=r;i.state="start",i.startClocks=m(),i.isAborted=!1,i.xhr=e,i.handlingStack=n,i.requestBody=t;let a=!1;const{stop:c}=h(e,"onreadystatechange",()=>{e.readyState===XMLHttpRequest.DONE&&d()}),d=()=>{if(u(),c(),a)return;a=!0;const l=r;l.state="complete",l.duration=St(i.startClocks.timeStamp,Ct()),l.status=e.status,typeof e.response=="string"&&(l.responseBody=e.response),o.notify(vt(l))},{stop:u}=S(s,e,"loadend",d);o.notify(i)}function Gn({target:e}){const t=le.get(e);t&&(t.isAborted=!0)}async function qn(e,t){const n=e.getReader(),s=[];for(;;){const o=await n.read();if(o.done)break;t.collectStreamBody&&s.push(o.value)}return n.cancel().catch(I),t.collectStreamBody?Tt(s):void 0}let X;const ze=[];function Ts({responseBodyAction:e}={}){return e&&ze.push(e),X||(X=$n()),X}function $n(){return new y(e=>{if(!T.fetch)return;const{stop:t}=h(T,"fetch",n=>Hn(n,e),{computeHandlingStack:!0});return t})}function Hn({parameters:e,onPostCall:t,handlingStack:n},s){const[o,r]=e;let i=r&&r.method;i===void 0&&o instanceof Request&&(i=o.method);const a=i!==void 0?String(i).toUpperCase():"GET",c=o instanceof Request?o.url:De(String(o)),d=m(),u={state:"start",init:r,input:o,method:a,startClocks:d,url:c,handlingStack:n};s.notify(u),e[0]=u.input,e[1]=u.init,t(l=>{Kn(s,l,u).catch(oe)})}async function Kn(e,t,n){var s,o;const r=n;r.state="resolve";let i;try{i=await t}catch(c){r.status=0,r.isAborted=((o=(s=r.init)===null||s===void 0?void 0:s.signal)===null||o===void 0?void 0:o.aborted)||c instanceof DOMException&&c.code===DOMException.ABORT_ERR,r.error=c,e.notify(r);return}r.response=i,r.status=i.status,r.responseType=i.type,r.isAborted=!1;const a=ze.reduce((c,d)=>Math.max(c,d(r)),0);if(a!==0){const c=$t(i);if(c&&c.body)try{const d=await qn(c.body,{collectStreamBody:a===2});r.responseBody=d&&new TextDecoder().decode(d)}catch{}}e.notify(r)}let W={};function _s(e){const t=e.map(n=>(W[n]||(W[n]=Vn(n)),W[n]));return Se(...t)}function Vn(e){return new y(t=>{const n=j[e];return j[e]=(...s)=>{n.apply(console,s);const o=Ee("console error");J(()=>{t.notify(jn(s,e,o))})},()=>{j[e]=n}})}function jn(e,t,n){const s=e.map(o=>Yn(o)).join(" ");if(t===Me.error){const o=e.find(q),r=he({originalError:o,handlingStack:n,startClocks:m(),source:A.CONSOLE,handling:"handled",nonErrorPrefix:"Provided",useFallbackStack:!1});return r.message=s,{api:t,message:s,handlingStack:n,error:r}}return{api:t,message:s,error:void 0,handlingStack:n}}function Yn(e){return typeof e=="string"?D(e):q(e)?_t(Be(e)):H(D(e),void 0,2)}const zn=500;function ws(){const e=[];return{add:o=>{e.push(o)>zn&&e.splice(0,1)},remove:o=>{je(e,o)},drain:o=>{e.forEach(r=>r(o)),e.length=0}}}function Xn(e){const t=Te(e)==="object";return t||_.error("Unsupported context:",e),t}function Q(e,t,n){const s={...e};for(const[o,{required:r,type:i}]of Object.entries(t))i==="string"&&!me(s[o])&&(s[o]=String(s[o])),r&&me(s[o])&&_.warn(`The property ${o} of ${n} is required; context will not be sent to the intake.`);return s}function me(e){return e==null||e===""}function de(e="",{propertiesConfig:t={}}={}){let n={};const s=new y,o={getContext:()=>Pt(n),setContext:r=>{Xn(r)?n=D(Q(r,t,e)):o.clearContext(),s.notify()},setContextProperty:(r,i)=>{n=D(Q({...n,[r]:i},t,e)),s.notify()},removeContextProperty:r=>{delete n[r],Q(n,t,e),s.notify()},clearContext:()=>{n={},s.notify()},changeObservable:s};return o}function Os(e,t,n,s){return v((...o)=>(s&&mn({feature:s}),e()[t][n](...o)))}function Is(e,t,n){e.changeObservable.subscribe(()=>{const s=e.getContext();n.add(o=>o[t].setContext(s))})}const Wn="_dd_c",Qn=[];function fe(e,t,n,s){const o=Jn(n,s);Qn.push(S(e,window,"storage",({key:d})=>{o===d&&i()})),t.changeObservable.subscribe(a);const r=U(c(),t.getContext());ae(r)||t.setContext(r);function i(){t.setContext(c())}function a(){localStorage.setItem(o,JSON.stringify(t.getContext()))}function c(){const d=localStorage.getItem(o);return d?JSON.parse(d):{}}}function Jn(e,t){return`${Wn}_${e}_${t}`}function As(e,t,n){const s=Zn();return t.storeContextsAcrossPages&&fe(t,s,n,4),e.register(0,()=>{const o=s.getContext();return ae(o)||!o.id?ue:{account:o}}),s}function Zn(){return de("account",{propertiesConfig:{id:{type:"string",required:!0},name:{type:"string"}}})}function xs(e,t,n,s){const o=es();return t.storeContextsAcrossPages&&fe(t,o,n,2),e.register(0,()=>{const r=o.getContext();return s?{context:r}:r}),o}function es(){return de("global context")}function Rs(e,t,n,s){const o=ts();return t.storeContextsAcrossPages&&fe(t,o,s,1),e.register(0,({eventType:r,startTime:i})=>{const a=o.getContext(),c=n.findTrackedSession(i);return c&&c.anonymousId&&!a.anonymous_id&&t.trackAnonymousUser&&(a.anonymous_id=c.anonymousId),ae(a)?ue:{type:r,usr:a}}),e.register(1,({startTime:r})=>{var i;return{anonymous_id:(i=n.findTrackedSession(r))===null||i===void 0?void 0:i.anonymousId}}),o}function ts(){return de("user",{propertiesConfig:{id:{type:"string"},name:{type:"string"},email:{type:"string"}}})}const ks={userContext:"userContext",globalContext:"globalContext",accountContext:"accountContext"},Ms={getContext:"getContext",setContext:"setContext",setContextProperty:"setContextProperty",removeContextProperty:"removeContextProperty",clearContext:"clearContext"},ns=500;function Bs(e=wt){const t=new ke(ns),n=e().subscribe(s=>{t.notify({type:0,error:s})});return{observable:t,stop:()=>{n.unsubscribe()}}}export{C as $,Ss as A,de as B,ks as C,se as D,Es as E,us as F,sn as G,an as H,Xt as I,An as J,On as K,In as L,Bt as M,Cs as N,Gt as O,B as P,ds as Q,te as R,ue as S,Ut as T,ls as U,fs as V,xs as W,Rs as X,As as Y,bn as Z,is as _,ys as a,Nt as a0,gs as a1,Is as a2,qt as a3,os as a4,nn as a5,es as b,U as c,ts as d,Zn as e,en as f,ps as g,Ts as h,bs as i,ce as j,ws as k,as as l,rs as m,Os as n,hs as o,mn as p,Ms as q,Pt as r,Bs as s,h as t,vn as u,vs as v,ms as w,_s as x,cs as y,Ve as z};
//# sourceMappingURL=bufferedData-Bfc_pTqn.js.map
