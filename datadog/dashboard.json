{
  "title": "Goblin Assistant - Production Monitoring",
  "description": "Real-time monitoring dashboard for Goblin Assistant MCP service KPIs and performance metrics",
  "template_variables": [
    {
      "name": "env",
      "prefix": "env",
      "default": "production"
    }
  ],
  "widgets": [
    {
      "id": 1,
      "definition": {
        "title": "P95 Response Latency",
        "type": "timeseries",
        "requests": [
          {
            "q": "p95:goblin.assistant.latency_ms{env:$env}",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "yaxis": {
          "label": "Latency (ms)",
          "min": "0",
          "max": "auto"
        },
        "markers": [
          {
            "value": "1500",
            "label": "Critical Threshold",
            "display_type": "error dashed"
          },
          {
            "value": "1000",
            "label": "Warning Threshold",
            "display_type": "warning dashed"
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 6,
        "height": 4
      }
    },
    {
      "id": 2,
      "definition": {
        "title": "Error Rate %",
        "type": "timeseries",
        "requests": [
          {
            "q": "avg:goblin.error.rate_percent{env:$env}",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "yaxis": {
          "label": "Error Rate (%)",
          "min": "0",
          "max": "10"
        },
        "markers": [
          {
            "value": "3",
            "label": "Critical Threshold",
            "display_type": "error dashed"
          },
          {
            "value": "1",
            "label": "Warning Threshold",
            "display_type": "warning dashed"
          }
        ]
      },
      "layout": {
        "x": 6,
        "y": 0,
        "width": 6,
        "height": 4
      }
    },
    {
      "id": 3,
      "definition": {
        "title": "RAG Hit Rate %",
        "type": "timeseries",
        "requests": [
          {
            "q": "(sum:goblin.rag.context_usage{env:$env,context_used:true} / sum:goblin.rag.context_usage{env:$env}) * 100",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "yaxis": {
          "label": "Hit Rate (%)",
          "min": "0",
          "max": "100"
        },
        "markers": [
          {
            "value": "60",
            "label": "Minimum Threshold",
            "display_type": "error dashed"
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 4,
        "width": 6,
        "height": 4
      }
    },
    {
      "id": 4,
      "definition": {
        "title": "Provider Fallback Rate %",
        "type": "timeseries",
        "requests": [
          {
            "q": "(sum:goblin.provider.fallbacks{env:$env,fallback_used:true} / (sum:goblin.provider.fallbacks{env:$env,fallback_used:true} + sum:goblin.provider.fallbacks{env:$env,fallback_used:false})) * 100",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "yaxis": {
          "label": "Fallback Rate (%)",
          "min": "0",
          "max": "20"
        },
        "markers": [
          {
            "value": "5",
            "label": "Critical Threshold",
            "display_type": "error dashed"
          }
        ]
      },
      "layout": {
        "x": 6,
        "y": 4,
        "width": 6,
        "height": 4
      }
    },
    {
      "id": 5,
      "definition": {
        "title": "Queue Depth",
        "type": "timeseries",
        "requests": [
          {
            "q": "avg:goblin.queue.depth{env:$env,queue:mcp\\:queue}",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "yaxis": {
          "label": "Queue Depth",
          "min": "0",
          "max": "auto"
        },
        "markers": [
          {
            "value": "50",
            "label": "Critical Threshold",
            "display_type": "error dashed"
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 8,
        "width": 6,
        "height": 4
      }
    },
    {
      "id": 6,
      "definition": {
        "title": "Daily Cost ($)",
        "type": "timeseries",
        "requests": [
          {
            "q": "sum:goblin.cost.daily_usd{env:$env}",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "yaxis": {
          "label": "Cost ($)",
          "min": "0",
          "max": "auto"
        },
        "markers": [
          {
            "value": "50",
            "label": "Budget Threshold",
            "display_type": "warning dashed"
          }
        ]
      },
      "layout": {
        "x": 6,
        "y": 8,
        "width": 6,
        "height": 4
      }
    },
    {
      "id": 7,
      "definition": {
        "title": "Request Volume",
        "type": "timeseries",
        "requests": [
          {
            "q": "sum:goblin.mcp.request.count{env:$env}.as_count()",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "yaxis": {
          "label": "Requests/min",
          "min": "0",
          "max": "auto"
        }
      },
      "layout": {
        "x": 0,
        "y": 12,
        "width": 6,
        "height": 4
      }
    },
    {
      "id": 8,
      "definition": {
        "title": "Token Usage",
        "type": "timeseries",
        "requests": [
          {
            "q": "sum:goblin.token.usage{env:$env}.as_count()",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "yaxis": {
          "label": "Tokens",
          "min": "0",
          "max": "auto"
        }
      },
      "layout": {
        "x": 6,
        "y": 12,
        "width": 6,
        "height": 4
      }
    }
  ],
  "layout_type": "ordered",
  "is_read_only": false,
  "notify_list": [],
  "reflow_type": "fixed"
}
